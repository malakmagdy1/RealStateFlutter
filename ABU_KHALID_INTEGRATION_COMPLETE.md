# โ ุชู ุฏูุฌ ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ ุจูุฌุงุญ!

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู

ุชู ุฏูุฌ **ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ** (Senior Broker AI) ูู ุงูุดุงุช ุงูููุฌูุฏ ุจูุฌุงุญ!

---

## ๐ ุงููููุงุช ุงููุนุฏููุฉ

### 1๏ธโฃ ููู ุฌุฏูุฏ: `lib/feature/ai_chat/core/senior_broker_prompt.dart`

**ุงููุตู:** ูุญุชูู ุนูู ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ ุจุงููุงูู

**ุงููุญุชูู:**
- ุดุฎุตูุฉ "ุฃุจู ุฎุงูุฏ" ุจุงูุนุฑุจู (ูุณูุท ุนูุงุฑู ุฎุจุฑุฉ 20+ ุณูุฉ)
- ุดุฎุตูุฉ "Senior Alex" ุจุงูุฅูุฌููุฒู
- ุฃุณููุจ ุงููุญุงุฏุซุฉ: ูุฏูุฏุ ุตุฑูุญุ ูุงุซูุ ุนููู
- ูุตุงุฆุญ: ุงูุชุนุงูู ูุน ุงูุนููุงุกุ ุงูุชูุงูุถุ ุฅููุงู ุงูุตููุงุช
- ุฏุงูุฉ `getQuickActions()` ููุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ

**ูุซุงู:**
```dart
final prompt = SeniorBrokerPrompt.getSystemPrompt(language: 'ar');
// ูุนุทูู ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ ุงููุงููุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
```

---

### 2๏ธโฃ ุชุนุฏูู: `lib/feature/sales_assistant/data/unified_ai_data_source.dart`

**ุงูุชุนุฏููุงุช:**

#### โ ุชู ุฅุถุงูุฉ Imports:
```dart
import '../../ai_chat/core/senior_broker_prompt.dart';
import 'package:real/core/locale/language_service.dart';
```

#### โ ุชุนุฏูู ุฏุงูุฉ `_initializeModel()`:
```dart
void _initializeModel() {
  // ุงุญุตู ุนูู ุงููุบุฉ ุงูุญุงููุฉ
  final currentLang = LanguageService.currentLanguage;

  // ุงุญุตู ุนูู ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ
  final seniorBrokerPersonality = SeniorBrokerPrompt.getSystemPrompt(
    language: currentLang
  );

  // ุงุฏูุฌ ุงูุดุฎุตูุฉ ูุน ุงูุชุนูููุงุช ุงูุชูููุฉ
  final fullSystemPrompt = '$seniorBrokerPersonality\n\n$_technicalInstructions';

  _model = GenerativeModel(
    model: AppConfig.geminiModel,
    apiKey: AppConfig.geminiApiKey,
    generationConfig: GenerationConfig(
      temperature: 0.8,        // โจ ุฒูุงุฏุฉ ููุญุตูู ุนูู ูุญุงุฏุซุฉ ุทุจูุนูุฉ
      topK: AppConfig.topK,
      topP: AppConfig.topP,
      maxOutputTokens: 1200,   // โจ ุฒูุงุฏุฉ ููุญุตูู ุนูู ูุตุงุฆุญ ููุตูุฉ
    ),
    systemInstruction: Content.system(fullSystemPrompt),
  );

  _chatSession = _model.startChat();
}
```

#### โ ุชู ุชุบููุฑ ุงุณู ุงููุชุบูุฑ:
```dart
// ูู:
static const String _unifiedSystemPrompt = '''...''';

// ุฅูู:
static const String _technicalInstructions = '''...''';
```

**ุงูุณุจุจ:** ุฃุตุจุญ ูุฐุง ุงููุชุบูุฑ ูุญุชูู ุนูู ุงูุชุนูููุงุช ุงูุชูููุฉ ููุท (property searchุ JSON formatting)ุ ุจูููุง ุงูุดุฎุตูุฉ ุชุฃุชู ูู `SeniorBrokerPrompt`

---

### 3๏ธโฃ ุชุนุฏูู: `lib/feature/ai_chat/presentation/screen/unified_ai_chat_screen.dart`

**ุงูุชุนุฏููุงุช:**

#### โ ุชู ุฅุถุงูุฉ Import:
```dart
import 'package:real/core/locale/language_service.dart';
import '../../core/senior_broker_prompt.dart';
```

#### โ ุชุนุฏูู AppBar ููุธูุฑ ุงุณู ุฃุจู ุฎุงูุฏ:
```dart
@override
Widget build(BuildContext context) {
  final currentLang = LanguageService.currentLanguage;
  final isArabic = currentLang == 'ar';
  final brokerName = isArabic ? 'ุฃุจู ุฎุงูุฏ' : 'Senior Alex';

  return Scaffold(
    appBar: AppBar(
      title: Text('๐ฏ $brokerName - ${l10n.aiChat}'),
      // ...
    ),
  );
}
```

#### โ ุชุนุฏูู ุงูุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ - `_buildQuickButtons()`:
```dart
Widget _buildQuickButtons() {
  final currentLang = LanguageService.currentLanguage;
  final quickActions = SeniorBrokerPrompt.getQuickActions(currentLang);

  final quickPrompts = [
    {'icon': '๐ค', 'text': quickActions['new_client']!},
    {'icon': '๐ค', 'text': quickActions['hesitant_client']!},
    {'icon': '๐ฐ', 'text': quickActions['price_objection']!},
    {'icon': '๐ฏ', 'text': quickActions['close_deal']!},
    {'icon': '๐ค', 'text': quickActions['negotiation']!},
    {'icon': '๐', 'text': quickActions['investment']!},
  ];

  // ... ุจูุงุก ุงูุฃุฒุฑุงุฑ
}
```

**ุงูุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ (ุนุฑุจู):**
- ๐ค ุฅุฒุงู ุฃุชุนุงูู ูุน ุนููู ุฌุฏูุฏุ
- ๐ค ุนูุฏู ุนููู ูุชุฑุฏุฏุ ุฅูู ุงููุตูุญุฉุ
- ๐ฐ ุงูุนููู ุจูููู ุงูุณุนุฑ ุบุงููุ ุฃุนูู ุฅููุ
- ๐ฏ ุฅุฒุงู ุฃููู ุงูุตููุฉ ุจูุฌุงุญุ
- ๐ค ูุตุงุฆุญ ุงูุชูุงูุถ ุนูู ุงูุณุนุฑ
- ๐ ุนููู ุนุงูุฒ ูุณุชุซูุฑุ ุฃูุตุญู ุจุฅููุ

**ุงูุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ (ุฅูุฌููุฒู):**
- ๐ค How to approach a new client?
- ๐ค Client is hesitant, what should I do?
- ๐ฐ Client says price is too high, how to handle?
- ๐ฏ How to successfully close the deal?
- ๐ค Price negotiation tips
- ๐ Client wants to invest, what to recommend?

#### โ ุชุนุฏูู Suggestion Chips - `_buildSuggestionChips()`:
```dart
Widget _buildSuggestionChips() {
  final currentLang = LanguageService.currentLanguage;
  final quickActions = SeniorBrokerPrompt.getQuickActions(currentLang);

  final suggestions = [
    quickActions['new_client']!,
    quickActions['price_objection']!,
    quickActions['close_deal']!,
  ];

  // ... ุจูุงุก ุงูู chips
}
```

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุงูุขูุ

### ุงูุดุฎุตูุฉ ุงููุฏูุฌุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Abu Khalid Personality          โ
โ  (ุฃุจู ุฎุงูุฏ - ูุณูุท ุนูุงุฑู ูุจูุฑ)           โ
โ                                         โ
โ  โข ุฎุจุฑุฉ 20+ ุณูุฉ                        โ
โ  โข ุฃุณููุจ: ูุฏูุฏุ ุตุฑูุญุ ูุงุซู            โ
โ  โข ูุตุงุฆุญ ุงูุชุนุงูู ูุน ุงูุนููุงุก            โ
โ  โข ุชูููุงุช ุงูุชูุงูุถ ูุงูุฅููุงุน             โ
โ  โข ุชูุตูุงุช ุงููุญุฏุงุช ูุงูููุงุฑูุงุช          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              +
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Technical Instructions             โ
โ                                         โ
โ  โข Property search from database        โ
โ  โข JSON formatting rules                โ
โ  โข Language detection                   โ
โ  โข Comparison logic                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
              โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ       Gemini AI Model                   โ
โ  temperature: 0.8  (ุทุจูุนู ุฃูุซุฑ)        โ
โ  maxTokens: 1200   (ูุตุงุฆุญ ููุตูุฉ)       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1๏ธโฃ ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ:

**ุฌุฑูุจ ูุฐู ุงูุฃุณุฆูุฉ:**

```
ุนุฑุจู:
- "ุฅุฒุงู ุฃุชุนุงูู ูุน ุนููู ุฌุฏูุฏุ"
- "ุงูุนููู ุจูููู ุงูุณุนุฑ ุบุงููุ ุฃุนูู ุฅููุ"
- "ูุตุงุฆุญ ููุชูุงูุถ ุนูู ุงูุณุนุฑ"
- "ุนููู ุนุงูุฒ ูุณุชุซูุฑุ ุฃูุตุญู ุจุฅููุ"

English:
- "How to approach a new client?"
- "Client says price is too high, how to handle?"
- "Price negotiation tips"
- "Client wants to invest, what to recommend?"
```

**ุงููุชููุน:**
- ุงูุฑุฏ ูููู ุจุฃุณููุจ ุฃุจู ุฎุงูุฏ (ุนุฑุจู ูุตุฑู ุทุจูุนู)
- ูุตุงุฆุญ ุนูููุฉ ูู ุฎุจุฑุฉ 20+ ุณูุฉ
- ุฃูุซูุฉ ููุตุต ูู ุงููุงูุน

---

### 2๏ธโฃ ุงุฎุชุจุงุฑ ุงูุจุญุซ ุนู ุงููุญุฏุงุช:

```
ุนุฑุจู:
- "ุนุงูุฒ ุดูุฉ 3 ุบุฑู ูู ุงูุชุฌูุน"
- "ุฃุจุญุซ ุนู ูููุง ูู ููุจููุฏ ุจุญูุงู ุณุจุงุญุฉ"

English:
- "Looking for 3 bedroom apartment in New Cairo"
- "Find villa with swimming pool"
```

**ุงููุชููุน:**
- ูุจุญุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุธูุฑ ูุชุงุฆุฌ ุงููุญุฏุงุช
- ูุนุทู ูุตูุญุฉ ุงุญุชุฑุงููุฉ ุนู ูู ูุญุฏุฉ

---

### 3๏ธโฃ ุงุฎุชุจุงุฑ ุงูููุงุฑูุฉ:

1. ุงุถุบุท ุฒุฑ "Compare" ูู ุฃู ูุญุฏุชูู
2. ุงุฐูุจ ููุดุงุช
3. ุงุถุบุท "Start Compare"

**ุงููุชููุน:**
- ููุงุฑูุฉ ุชูุตูููุฉ ุจุฃุณููุจ ุฃุจู ุฎุงูุฏ
- ูุฐูุฑ ุงููููุฒุงุช ูุงูุนููุจ ุจุตุฑุงุญุฉ
- ูุนุทู ุฑุฃูู ุงููููู: ุฃูููุง ุฃูุถู ูููุงุฐุง
- ูุญุฏุฏ ููู ุชูุงุณุจ ูู ูุญุฏุฉ

---

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุง ุชู ุชุญุณููู:

1. **AppBar:**
   ```
   ๐ฏ ุฃุจู ุฎุงูุฏ - AI Chat
   ```

2. **ุฃุฒุฑุงุฑ ุณุฑูุนุฉ (6 ุฃุฒุฑุงุฑ):**
   ```
   [๐ค ุฅุฒุงู ุฃุชุนุงูู ูุน ุนููู ุฌุฏูุฏุ]
   [๐ค ุนูุฏู ุนููู ูุชุฑุฏุฏุ ุฅูู ุงููุตูุญุฉุ]
   [๐ฐ ุงูุนููู ุจูููู ุงูุณุนุฑ ุบุงูู]
   [๐ฏ ุฅุฒุงู ุฃููู ุงูุตููุฉุ]
   [๐ค ูุตุงุฆุญ ุงูุชูุงูุถ]
   [๐ ุนููู ุนุงูุฒ ูุณุชุซูุฑ]
   ```

3. **Empty State Suggestions (3 ุงูุชุฑุงุญุงุช):**
   ```
   [ุฅุฒุงู ุฃุชุนุงูู ูุน ุนููู ุฌุฏูุฏุ]
   [ุงูุนููู ุจูููู ุงูุณุนุฑ ุบุงููุ ุฃุนูู ุฅููุ]
   [ุฅุฒุงู ุฃููู ุงูุตููุฉ ุจูุฌุงุญุ]
   ```

---

## ๐ ููููุฉ ุงูุชุดุบูู

### ููุงุฎุชุจุงุฑ ุนูู ุงูููุจุงูู:

```bash
# ุชุฃูุฏ ูู ุชูุตูู ุงูุฌูุงุฒ ุฃู ุชุดุบูู Emulator
flutter devices

# ุดุบูู ุงูุชุทุจูู
flutter run
```

### ููุงุฎุชุจุงุฑ ุนูู ุงูููุจ:

```bash
# ุดุบูู ุนูู Web
flutter run -d chrome
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุชูููุฉ

### ุชู ุชุนุฏูู ูุนุงููุงุช ุงูู AI:

| ุงููุนุงูู | ุงููููุฉ ุงููุฏููุฉ | ุงููููุฉ ุงูุฌุฏูุฏุฉ | ุงูุณุจุจ |
|---------|----------------|----------------|--------|
| `temperature` | default (0.7) | **0.8** | ูุญุงุฏุซุฉ ุฃูุซุฑ ุทุจูุนูุฉ ูุชููุน |
| `maxOutputTokens` | 1000 | **1200** | ูุตุงุฆุญ ููุตูุฉ ุฃุทูู |
| `systemInstruction` | Basic prompt | **Abu Khalid + Technical** | ุดุฎุตูุฉ ูุงููุฉ |

---

## ๐ ุฃูุซูุฉ ุนูู ุฃุณููุจ ุฃุจู ุฎุงูุฏ

### ุนุฑุจู:
```
ูุง ุจุงุดุงุ ุฎูููู ุฃูููู ูู ุฎุจุฑุชู ูู ุงูุณูู...

ุจุต ูุง ุณูุฏูุ ุงูุนููู ุงููู ุจูููู ุงูุณุนุฑ ุบุงููุ
ุฏู ููุนู ูุนุฑูู ููุดููุฑ. ุฃูุง ุดุงูู ุฃูู ุญุงูุฉ ุฒู ุฏู.

ูุตูุญุชู ููู: ูุง ุชุฏุฎูุด ูู ุฌุฏุงู ุนูู ุงูุณุนุฑ ุฃุจุฏุงู!
ุจุฏู ูุง ุชููู "ูุง ุงูุณุนุฑ ุนุงุฏู"ุ ูููู "ุฎูููุง ูุดูู
ุงููููุฉ ุงููู ูุชุญุตู ุนูููุง..."
```

### English:
```
In my experience, when a client says the price is too high,
it's actually a sign they're interested! Let me tell you
what I've learned over 20 years...

My advice to you: Never argue about price.
Instead, shift the conversation to value...
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- โ ูุณุฎ ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ ููููุฏ ุงูุญุงูู
- โ ุฑุจุท ุงูุดุฎุตูุฉ ุจุงูู UnifiedAIDataSource
- โ ุฅุถุงูุฉ ุงูุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ (6 ุฃุฒุฑุงุฑ)
- โ ุชุนุฏูู ุงูู AppBar ููุธูุฑ ุงุณู ุฃุจู ุฎุงูุฏ
- โ ุชุนุฏูู ุงูู Empty State Suggestions
- โ ุฒูุงุฏุฉ temperature ุฅูู 0.8
- โ ุฒูุงุฏุฉ maxOutputTokens ุฅูู 1200
- โ ุฏุนู ุงููุบุชูู (ุนุฑุจู + ุฅูุฌููุฒู)
- โ ุชุดุบูู flutter analyze (ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุญุฑุฌุฉ)
- โ ุชุดุบูู flutter pub get

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงูู Comparison Feature:
- ููุฒุฉ ุงูููุงุฑูุฉ ูุงูุช ููุฌูุฏุฉ ูู ูุจู ูุชุนูู ุจุดูู ููุชุงุฒ
- ุชู ุชุญุณูู ุงูู Prompt ููุชูุงุดู ูุน ุฃุณููุจ ุฃุจู ุฎุงูุฏ
- ุงูุขู ุงูููุงุฑูุฉ ุจุฃุณููุจ ุงุญุชุฑุงูู ุฃูุซุฑ

### 2. Property Search:
- ุงูุจุญุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุนูู
- ุงูุขู ุงูุชูุตูุงุช ุชุฃุชู ุจุฃุณููุจ ุฃุจู ุฎุงูุฏ ุงูุงุญุชุฑุงูู

### 3. Sales Advice:
- **ุฌุฏูุฏ!** ุงูุขู ูููู ูููุณุทุงุก ุฃู ูุณุฃููุง ูุตุงุฆุญ ุงูุจูุน
- ุฃุณุฆูุฉ ูุซู "ุฅุฒุงู ุฃููู ุงูุตููุฉุ" - "ููู ุฃุชุนุงูู ูุน ุนููู ูุชุฑุฏุฏุ"

---

## ๐ ุงูุฎุทูุงุช ุงููุงุฏูุฉ (ุงุฎุชูุงุฑู)

### ุฅุฐุง ุฃุฑุฏุช ุชุญุณููุงุช ุฅุถุงููุฉ:

1. **ุฅุถุงูุฉ ุฃูุซูุฉ ูุงูุนูุฉ:**
   - ุฃูุซูุฉ ุนู ูุทูุฑูู ุญูููููู ูู ุงูุณูู ุงููุตุฑู
   - ุฃูุซูุฉ ุนู ููุจููุฏุงุช ูุนุฑููุฉ

2. **ุฅุถุงูุฉ ุฐุงูุฑุฉ ุงููุญุงุฏุซุฉ:**
   - ูุชุฐูุฑ ุฃุจู ุฎุงูุฏ ุงูุฃุณุฆูุฉ ุงูุณุงุจูุฉ
   - ูุนุทู ูุตุงุฆุญ ูุฎุตุตุฉ ุฃูุซุฑ

3. **ุฅุถุงูุฉ ุชุญููู ููุณูุฉ ุงูุนููู:**
   - ูู ุงูุฑุณุงุฆู ูุญูู ููุน ุงูุนููู
   - ูุนุทู ูุตุงุฆุญ ูุฎุตุตุฉ ููู ููุน

---

## ๐ฏ ุงูุฎูุงุตุฉ

โ **ุชู ุฏูุฌ ุดุฎุตูุฉ ุฃุจู ุฎุงูุฏ ุจูุฌุงุญ ูู ุงูุดุงุช ุงูููุฌูุฏ!**

ุงูุขู ูุฏูู:
- ๐ฏ ูุณูุท ุนูุงุฑู ูุจูุฑ ูุณุงุนุฏ ุงููุณุทุงุก ุงูุตุบุงุฑ
- ๐ฌ ูุญุงุฏุซุฉ ุทุจูุนูุฉ ุจุฃุณููุจ ูุตุฑู ูุฏูุฏ
- ๐๏ธ ุจุญุซ ุนู ุงููุญุฏุงุช ุงูุนูุงุฑูุฉ
- ๐ ููุงุฑูุฉ ุงุญุชุฑุงููุฉ ุจูู ุงููุญุฏุงุช
- ๐ก ูุตุงุฆุญ ุงูุจูุน ูุงูุชูุงูุถ
- ๐ ุชุนููู ุงููุณุทุงุก ููู ูุชุนุงูููุง ูุน ุงูุนููุงุก

---

## ๐ ููุงุฎุชุจุงุฑ ูุงูุชุฌุฑุจุฉ

**ุดุบูู ุงูุชุทุจูู ูุฌุฑูุจ:**

```bash
flutter run
```

**ุซู ุงุฐูุจ ุฅูู AI Chat ูุงุถุบุท ุนูู ุฃู ุฒุฑ ุณุฑูุน!**

---

๐ **ูุจุฑูู! ุฃุจู ุฎุงูุฏ ุฌุงูุฒ ููุนูู!** ๐
